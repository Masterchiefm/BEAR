# BEAR - Base Editing Analyzer
[English version](/README.md) ｜ 中文版
## 目的
根据Sanger测序结果推测碱基编辑的效率。该程序的目的是解决大批量分析这些数据的痛点。

我为什么要写这个程序呢？有天实验室的师姐问我有没有什么办法帮她大批量分析碱基编辑的效率，此时她使用的方法
是在某网页上一个一个样品上传，然后一个一个地记录数据。这工作量我看着头大，所以有了这个软件。

虽然现在流行的方法是在某网页上进行分析，而且人家也提供了R代码，但是我不懂R。R其实对不懂编程的人来说，特别不友好，
要把自己的程序分享给小白们使用，就只能打包成网页，而且还得拖一堆乱七八糟的东西。其实最主要的是，我不懂R，不想学R。

所以，我根据自己对Sanger测序以Base Editing的理解，使用Python和Qt做了一个新的工具。这个工具最主要的特点是
分析结束后，所有的数据能汇总到Excel表格里，可以让使用者能直接去Excel或者WPS里进行后续的工作。


## 使用方法
### 下载运行
点击网页发行版，或者[这里](https://gitee.com/MasterChiefm/BEAR/releases/latest)选中最新的版本下载BEAR.exe即可。

又或者在 [Github](https://github.com/Masterchiefm/BEAR/releases/latest) 下载该文件。

下载到的exe文件直接双击即可运行，**无需安装，无需任何电脑设置**。

### 视频教程
[Bilibili - BEAR使用教程](https://www.bilibili.com/video/BV1sG411E71G/)

### 测试文件
测试文件可在此下载
[55-ABE-VEGFA-R_H01%20(1).ab1](https://gitee.com/MasterChiefm/BEAR/blob/master/55-ABE-VEGFA-R_H01%20(1).ab1)

该测序样本的编辑区域为CCCGGCTCTGGCTAAA，碱基将从C编辑为T

### 输入基本样品信息
运行后，你将会看到一个类似excel表格的界面，你只需要填写好样品名，sgRNA序列这两个基本信息就可以运行了。
如果你想要程序给你汇总目标位点上碱基编辑的效率，那就把原始碱基，修改后的碱基，修改的目标位置这三个空填上就行了

如果你觉得在这里填写不方便，可以点击“导出当前表格”，把你眼前的表格导出到Excel表里，然后再在Excel中自己写好。
保存并关闭excel后，再点击“从表格导入”就可以了。
![](/screenshot.png)

### 测序文件上传
至于Sange测序文件，我肯定不会让你一个一个拖着上传的。

#### 上传方法1
有三个方法，一个是多选数个样品，然后在下方点击“单个测序文件应用到选区”的这个tab，然后再拖一个测序文件到这个框里。程序
将会自动把你选中的这多个样品对应上这个测序文件。

#### 上传方法2
另一个方法是先不要填基本信息表，直接点击第二个tab，然后你在文件管理器中同时多选数个ab1文件，例如我现在有以下测序文件：
```commandline
sample1-aaa-20221005.ab1,
sample2-aaa-20221005.ab1,
sample3-aaa-20221005.ab1,
sample4-aaa-20221005.ab1
...vb hn
```
然后我将这些文件同时拖进这“多个文件自动对应样品名”这个识别区，程序就会自动根据测序文件的名字填写好样品民和测序文件。
程序写样品名的依据是”自定义分隔符“，默认的分隔符是”-“，也就是说”sample1-aaa-20221005.ab1“会被”-“分成”sample1“，
”aaa“，”20221005.ab1“这三部分。这三部分只取第一部分作为样品名。然后基本信息表的样品名就会自动填写上sample1.

分隔符可以修改，例如我将分隔符改成”-aaa-“,那么测序文件的名字就会被分成”sample1“和”20221005.ab1“两部分。同样只应用第一部分为样品名。
也就是说，在填写测序定单的时候，如果你在你的测序样品名里自己另外填入一些不会与真实样品名混淆的单词，那我的程序就能帮你把
测序公司给的测序文件后缀全部去掉。


#### 上传方法3
其实还是与上一方法一致，如果你在基本信息表里填了样品，那么，你在使用方法2的时候，如果识别到的sanger文件样品名能与你填好的
样品名对应上，那么程序就会自动给填好的样品对应上测序文件。对应不上才会自动新建一行。

### 开始分析
填好信息后，点击”设置存储路径并开始“就可以了。首先程序会让你选中一个目录来保存结果，选好目录后，就开始分析了。程序
会卡住一小会，样品多的话，一两分钟就行了。然后在基本信息表里，目标位点编辑效率、各个位点上的编辑效率都会自动填写上。

同样，点击”导出当前表格“就能把整个表导出成excel，你能在excel中进行更多操作，省下了手动一个一个记录的功夫。
![](/screenshot2.png)

程序还为每个测序样品提供了一个报告页面，在基本信息下面，有个”打开报告“的长按钮，你在选中了样品后，点击打开报告，
就能看到这个测序样品的测序内容，包括Sanger测序质量，sgRNA上各个碱基变成其它碱基的概率。

不过，这个报表我估计你也不怎么看。

![](/screenshot3.png)


## Cite This Work
I did't publish it, and I don't know if it can be published in any magazine.
Citing this work in acknowledgement is fine!

If some day I put it to a magazine, I will update this info.

